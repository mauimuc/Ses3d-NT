<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ses3d-NT: Build Instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ses3d-NT
   </div>
   <div id="projectbrief">simulation of elastic wave propagation in spherical sections</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Build Instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This file gives an overview on how to build and installing Ses3d-NT. In the second half of this document there are actual examples given how to build Ses3d-NT on some selected environments.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Prerequisites</h1>
<p>Before you try to build Ses3d-NT make sure your system matches all the prerequisites. This is a list of general requirements:</p>
<ul>
<li>A current Linux based system</li>
<li>A commonly used shell (e.g. bash)</li>
<li>Fortran 2008 compiler (preferably gfortran ≥ 4.8.2)</li>
<li>Any MPI ≥ 2.x implementation (e.g. OpenMPI, MPICH, ... )</li>
<li>GNU Make</li>
</ul>
<p>If you want to write output in the NetCDF file format you will additionally need</p>
<ul>
<li>zlib (≥ 1.2.7)</li>
<li>hdf5 parallel (≥ 1.8.9)</li>
<li>netCDF with MPI support (C and Fortran) (≥ 4.2.x)</li>
</ul>
<p>Having netCDF enabled is handy since visualizing volume snapshots is just few mouse-clicks away. You may want render your results right away using Paraview.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Building the Binary</h1>
<p>To build the executable, switch to the source code directory by typing: </p><pre class="fragment">cd ses3d-nt/src
</pre><p>Building Ses3d-NT is typically a combination of setting some environment variables and <code>make</code>. Environment variables as well as build parameters are described below.</p>
<p>The easiest approach is to compile Ses3d-NT <b>without NetCDF support</b> by executing the following command: </p><pre class="fragment">make ses3d-nt
</pre><p>If everything goes well the executable <code>ses3d-nt</code> can be found in the directory <code>ses3d-nt/bin/</code>. To check whether everything went well you can simply run one of the toy simulations. Please see the getting-started guide.</p>
<p>Remarks:</p><ul>
<li>Without preparations the <code>make</code> command will fail on almost all systems. For some environments we provide selected build-examples. See below.</li>
<li>In case you already tried to run <code>make</code> without success or in case you want to change something then you have to delete all already compiled object files by executing <code>make clean</code>.</li>
<li>By default NetCDF support is disabled. To build Ses3d-NT <b>with parallel NetCDF enabled</b> an environmental variable must be set. See below.</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Environment Variables</h2>
<p>As mentioned above some environment variables are recognized. That are:</p><ul>
<li>MPI_FC: ...</li>
<li>NetCDF: ...</li>
<li>MPI_INCLUDE: ...</li>
<li>CPPFLAGS: ...</li>
<li>FFLAGS: ...</li>
<li>LDFLAGS: ...</li>
<li>LIBS: ...</li>
</ul>
<p>There are three ways to set environment variables. Either you put them in front of the make command e.g. </p><pre class="fragment">CPPFLAGS='-DNetCDF' make ses3d-nt
</pre><p>use </p><pre class="fragment">export CPPFLAGS='-DNetCDF'
</pre><p>or alter the values inside of the Makefile.</p>
<p>Please mind that in case you build with non standard libraries to execute Ses3d-NT with specifying the LD_LIBRARY_PATH environment variable.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Build Parameters</h2>
<p>Amongst other parameters the floating-point representation can be specified in line 45 of /src/parameters.F90 </p><pre class="fragment">INTEGER, PARAMETER :: real_kind = REAL64
</pre><p>The default value is REAL32. Possible values are REAL64 and REAL128.</p>
<p>Please mind that the entire code must be recompiled after changing the floating point representation. Execute <code>make clean</code> first!</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Debian based Systems</h1>
<p>In the following we assume you run an apt-based Linux system (e.g. Debian/Mint/ Ubuntu). For Linux Distributions based on other package managers (e.g. RPM), usually substituting the term <code>apt-get</code> by a term like <code>YUM</code> (Fedora) or <code>urpmi</code> (Mageia) should work.</p>
<p>You need to install the following:</p><ul>
<li>GNU make: A build automation tool.</li>
<li>gfortran: The Fortran compiler of the GNU Compiler Collection.</li>
<li>OpenMPI: A free MPI implementation.</li>
</ul>
<p>To install those packages execute: </p><pre class="fragment">sudo apt-get install make gfortran openmpi-bin libopenmpi-dev
</pre><blockquote class="doxtable">
<p>Hint: On some systems there is a more recent snapshot of GCC available. Try to install the package gcc-snapshot. Usually you will find that version in <code>/usr/lib/-gcc-snapshot/bin/</code>. To invoke this compiler you need to tell it to the MPI wrapper script. For OpenMPI with GCC say: <code>export OMPI_FC=/usr/lib/gcc-snapshot/bin/gfortran</code> </p>
</blockquote>
<blockquote class="doxtable">
<p>Optional: If you want to use the NetCDF file format to output 3d Volume snapshots, you need to manually install the netCDF C and Fortran libraries and all its dependencies <b>with parallel support enabled</b>. </p>
</blockquote>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 1 2020 12:33:51 for Ses3d-NT by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
